name: Ansible Lint  # feel free to pick your own name

on: [push, pull_request]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    # Important: This sets up your GITHUB_WORKSPACE environment variable
    - uses: actions/checkout@v2



    - name: Perform integration testing with ansible-test
      uses: ansible-community/ansible-test-gh-action@release/v1
      with:
        ansible-core-version: stable-2.11
        pre-test-cmd: echo This runs before the ansible-test invocation
        python-version: 3.9
        target-python-version: 3.9
        testing-type: integration
        test-deps: ansible.netcommon
    - name: Perform sanity testing with ansible-test
      uses: ansible-community/ansible-test-gh-action@release/v1
      with:
        ansible-core-version: stable-2.11
        testing-type: sanity
    - name: Perform unit testing with ansible-test
      uses: ansible-community/ansible-test-gh-action@release/v1
      with:
        ansible-core-version: stable-2.11
        pre-test-cmd: echo This runs before the ansible-test invocation
        python-version: 3.9
        target-python-version: 3.9
        testing-type: units
        test-deps: >-
          ansible.netcommon
          ansible.utils

